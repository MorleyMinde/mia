<form class="space-y-4 p-4" [formGroup]="form" (ngSubmit)="save()">
  <section class="stack" formGroupName="bp">
    <header>
      <p>BP</p>
      <span>{{ form.value.date }}</span>
    </header>
    <div class="grid grid-cols-2 gap-3">
      <input type="number" formControlName="sys" class="input" placeholder="SYS">
      <input type="number" formControlName="dia" class="input" placeholder="DIA">
    </div>
    <input type="time" formControlName="time" class="input">
  </section>

  <section class="stack" formGroupName="glucose">
    <header>
      <p>Sukari</p>
      <span>{{ form.get('glucose.context')?.value || 'random' }}</span>
    </header>
    <div class="grid grid-cols-2 gap-3">
      <input type="number" step="0.1" formControlName="mmol" class="input" placeholder="mmol/L">
      <select formControlName="context" class="input">
        <option value="fasting">Fasting</option>
        <option value="random">Random</option>
      </select>
    </div>
    <input type="time" formControlName="time" class="input">
  </section>

  <section class="stack" formGroupName="meds">
    <header>
      <p>Meds</p>
      <label class="toggle">
        <input type="checkbox" formControlName="taken" class="checkbox">
        <span>Taken</span>
      </label>
    </header>
    <input type="text" formControlName="names" class="input" placeholder="Add names">
  </section>

  <section class="stack" formGroupName="food">
    <header>
      <p>Food</p>
    </header>
    <div class="flex gap-3">
      <label class="flex-1 text-center text-xs">
        Salt
        <input type="range" min="1" max="5" formControlName="salt" class="w-full">
      </label>
      <label class="flex-1 text-center text-xs">
        Carbs
        <input type="range" min="1" max="5" formControlName="carb" class="w-full">
      </label>
    </div>
    <textarea rows="2" formControlName="notes" class="input" placeholder="Snack notes"></textarea>
  </section>

  <section class="stack grid grid-cols-2 gap-3">
    <div formGroupName="exercise" class="flex flex-col gap-2">
      <p class="text-xs uppercase tracking-[0.4em] text-muted">Move</p>
      <input type="number" formControlName="minutes" class="input" placeholder="min">
    </div>
    <div class="flex flex-col gap-2">
      <p class="text-xs uppercase tracking-[0.4em] text-muted">Alcohol</p>
      <input type="number" formControlName="alcohol" class="input" placeholder="0">
    </div>
    <div class="flex flex-col gap-2">
      <p class="text-xs uppercase tracking-[0.4em] text-muted">Cigs</p>
      <input type="number" formControlName="cigarettes" class="input" placeholder="0">
    </div>
    <div class="flex flex-col gap-2">
      <p class="text-xs uppercase tracking-[0.4em] text-muted">Herbs</p>
      <input type="text" formControlName="herbs" class="input" placeholder="Moringa">
    </div>
  </section>

  <textarea rows="3" formControlName="notes" class="input" placeholder="Notes"></textarea>

  <button type="submit" class="pill-button w-full text-lg">Save</button>
  <p class="text-center text-danger text-sm" *ngIf="errorMessage()">{{ errorMessage() }}</p>
</form>
